-- =====================================================
-- WXV SPEED BOOST | SCRIPT COMPLETO
-- =====================================================

-- ======================
-- SERVIÇOS
-- ======================
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer

-- ======================
-- VARIÁVEIS ORIGINAIS
-- ======================
local ultraSpeedConn = nil
local ultraSpeedActive = false
local freezeTime = 0.1
local speedValue = 155

-- ======================
-- SCRIPT DE SPEED (NÃO ALTERADO)
-- ======================
local function toggleUltraSpeed(state)
	if ultraSpeedConn then
		ultraSpeedConn:Disconnect()
		ultraSpeedConn = nil
	end

	ultraSpeedActive = state

	if ultraSpeedActive then
		local UseItemEvent = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("Net"):WaitForChild("RE/UseItem")
		local freezeTimer = 0

		ultraSpeedConn = RunService.RenderStepped:Connect(function(dt)
			local char = player.Character
			if not char then return end
			local humanoid = char:FindFirstChildOfClass("Humanoid")
			local hrp = char:FindFirstChild("HumanoidRootPart")
			if not humanoid or not hrp then return end

			local item = char:FindFirstChild("Grapple Hook") or player.Backpack:FindFirstChild("Grapple Hook")
			if item and item.Parent ~= char then
				humanoid:EquipTool(item)
			end
			if item and item.Parent == char then
				pcall(function() UseItemEvent:FireServer(0) end)
			end

			if freezeTimer > 0 then
				hrp.AssemblyLinearVelocity = Vector3.new(0, hrp.AssemblyLinearVelocity.Y, 0)
				freezeTimer = math.max(0, freezeTimer - dt)
				return
			end

			local moveDir = humanoid.MoveDirection
			if moveDir.Magnitude > 0 then
				local rayParams = RaycastParams.new()
				rayParams.FilterDescendantsInstances = {char}
				rayParams.FilterType = Enum.RaycastFilterType.Blacklist
				local hit = workspace:Raycast(hrp.Position, moveDir.Unit * 2, rayParams)

				if hit and hit.Instance and hit.Instance.CanCollide then
					freezeTimer = freezeTime
					return
				end

				hrp.AssemblyLinearVelocity = Vector3.new(
					moveDir.Unit.X * speedValue,
					hrp.AssemblyLinearVelocity.Y,
					moveDir.Unit.Z * speedValue
				)
			else
				hrp.AssemblyLinearVelocity = Vector3.new(0, hrp.AssemblyLinearVelocity.Y, 0)
			end
		end)
	end
end

toggleUltraSpeed(false)

-- ======================
-- GUI | WXV SPEED BOOST
-- ======================
local gui = Instance.new("ScreenGui")
gui.Name = "WXV_SPEED_BOOST"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local main = Instance.new("Frame", gui)
main.Size = UDim2.new(0,160,0,140)
main.Position = UDim2.new(0,20,0.5,-70)
main.BackgroundColor3 = Color3.fromRGB(15,15,15)
main.BackgroundTransparency = 0.25
main.BorderSizePixel = 0
main.Active = true
main.Draggable = true
Instance.new("UICorner", main).CornerRadius = UDim.new(0,10)

-- TÍTULO
local title = Instance.new("TextLabel", main)
title.Size = UDim2.new(1,0,0,28)
title.BackgroundTransparency = 1
title.Text = "WXV SPEED BOOST"
title.Font = Enum.Font.Arcade
title.TextSize = 14
title.TextColor3 = Color3.fromRGB(255,230,0)

-- LABEL SPEED
local speedLabel = Instance.new("TextLabel", main)
speedLabel.Position = UDim2.new(0,0,0,32)
speedLabel.Size = UDim2.new(1,0,0,16)
speedLabel.BackgroundTransparency = 1
speedLabel.Text = "SPEED (0-180)"
speedLabel.Font = Enum.Font.Arcade
speedLabel.TextSize = 11
speedLabel.TextColor3 = Color3.fromRGB(255,255,255)

-- TEXTBOX SPEED
local speedBox = Instance.new("TextBox", main)
speedBox.Position = UDim2.new(0.1,0,0,52)
speedBox.Size = UDim2.new(0.8,0,0,24)
speedBox.BackgroundColor3 = Color3.fromRGB(30,30,30)
speedBox.Text = tostring(speedValue)
speedBox.PlaceholderText = "0-180"
speedBox.ClearTextOnFocus = false
speedBox.Font = Enum.Font.Gotham -- exceção
speedBox.TextSize = 14
speedBox.TextColor3 = Color3.new(1,1,1)
speedBox.BorderSizePixel = 0
Instance.new("UICorner", speedBox).CornerRadius = UDim.new(0,6)

speedBox.FocusLost:Connect(function()
	local v = tonumber(speedBox.Text)
	if not v then
		speedBox.Text = tostring(speedValue)
		return
	end
	speedValue = math.clamp(math.floor(v), 0, 180)
	speedBox.Text = tostring(speedValue)
end)

-- BOTÃO TOGGLE
local toggleBtn = Instance.new("TextButton", main)
toggleBtn.Position = UDim2.new(0.1,0,0,90)
toggleBtn.Size = UDim2.new(0.8,0,0,30)
toggleBtn.Font = Enum.Font.Arcade
toggleBtn.TextSize = 12
toggleBtn.Text = "OFF"
toggleBtn.TextColor3 = Color3.fromRGB(0,0,0)
toggleBtn.BackgroundColor3 = Color3.fromRGB(255,221,0)
toggleBtn.BorderSizePixel = 0
Instance.new("UICorner", toggleBtn).CornerRadius = UDim.new(0,6)

local function updateToggleUI()
	if ultraSpeedActive then
		toggleBtn.Text = "ON"
		toggleBtn.BackgroundColor3 = Color3.fromRGB(0,255,0)
	else
		toggleBtn.Text = "OFF"
		toggleBtn.BackgroundColor3 = Color3.fromRGB(255,221,0)
	end
end

toggleBtn.MouseButton1Click:Connect(function()
	ultraSpeedActive = not ultraSpeedActive
	toggleUltraSpeed(ultraSpeedActive)
	updateToggleUI()
end)

-- ======================
-- HOTKEY PC | Q
-- ======================
UserInputService.InputBegan:Connect(function(input, gp)
	if gp then return end
	if input.KeyCode == Enum.KeyCode.Q then
		ultraSpeedActive = not ultraSpeedActive
		toggleUltraSpeed(ultraSpeedActive)
		updateToggleUI()
	end
end)
